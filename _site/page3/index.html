<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Hyde &middot; A Jekyll theme
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Hyde
        </a>
      </h1>
      <p class="lead">A brazen two-column <a href="http://jekyllrb.com" target="_blank">Jekyll</a> theme that pairs a prominent sidebar with uncomplicated content. Made by <a href="https://twitter.com/mdo" target="_blank">@mdo</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/poole/hyde/archive/v2.1.0.zip">Download</a>
      <a class="sidebar-nav-item" href="https://github.com/poole/hyde">GitHub project</a>
      <span class="sidebar-nav-item">Currently v2.1.0</span>
    </nav>

    <p>&copy; 2018. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/03/26/Load-Testing-HAProxy-Part-2-4c8677780df6/">
        Load Testing HAProxy (Part 2)
      </a>
    </h1>

    <span class="post-date">26 Mar 2017</span>
  
    
    <!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 2)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 2)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you…
</section>
<section data-field="body" class="e-content">
<section name="c817" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="541b" id="541b" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="6ced" id="6ced" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72.7%;"></div><img class="graf-image" data-image-id="1*s2S16ZXbIxtsYIG87aOadg.png" data-width="3055" data-height="2222" src="https://cdn-images-1.medium.com/max/2000/1*s2S16ZXbIxtsYIG87aOadg.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="2b00" id="2b00" class="graf graf--p graf-after--figure">This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you haven’t gone through the previous post, I would highly suggest you do so to get some sort of context.
    <br>
    <a href="/2017/03/26/Load-Testing-HAProxy-Part-2-4c8677780df6/">
         Read More...
    </a>
    <hr>
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 2)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 2)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you…
</section>
<section data-field="body" class="e-content">
<section name="c817" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="541b" id="541b" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="6ced" id="6ced" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72.7%;"></div><img class="graf-image" data-image-id="1*s2S16ZXbIxtsYIG87aOadg.png" data-width="3055" data-height="2222" src="https://cdn-images-1.medium.com/max/2000/1*s2S16ZXbIxtsYIG87aOadg.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="2b00" id="2b00" class="graf graf--p graf-after--figure">This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you haven’t gone through the previous post, I would highly suggest you do so to get some sort of context.  <div name="11c5" id="11c5" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" data-href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d"><strong class="markup--strong markup--mixtapeEmbed-strong">Load Testing HAProxy (Part-1)</strong><br><em class="markup--em markup--mixtapeEmbed-em">Load Testing ? HAProxy ? If all this seems greek to you, don’t worry. I will provide inline links to read up on what…</em>medium.com</a><a href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b4e074c36e4fe03700883e589ab06de8" data-thumbnail-img-id="1*4npSurj6b2n__CsxxnaUQw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*4npSurj6b2n__CsxxnaUQw.png);"></a></div><p name="834b" id="834b" class="graf graf--p graf-after--mixtapeEmbed">This post will focus on the TCP Port exhaustion problem and how we can deal with it. In the last post we talked about how we can tune the kernel level and process level ulimit settings. This post is focussed on modifying the sysctl settings to get over the port exhaustion limits.-->
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 2)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 2)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you…
</section>
<section data-field="body" class="e-content">
<section name="c817" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="541b" id="541b" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="6ced" id="6ced" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72.7%;"></div><img class="graf-image" data-image-id="1*s2S16ZXbIxtsYIG87aOadg.png" data-width="3055" data-height="2222" src="https://cdn-images-1.medium.com/max/2000/1*s2S16ZXbIxtsYIG87aOadg.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="2b00" id="2b00" class="graf graf--p graf-after--figure">This is the second part in the 3 part series on performance testing of the famous TCP load balancer and reverse proxy, HAProxy. If you haven’t gone through the previous post, I would highly suggest you do so to get some sort of context.</p><div name="11c5" id="11c5" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" data-href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d"><strong class="markup--strong markup--mixtapeEmbed-strong">Load Testing HAProxy (Part-1)</strong><br><em class="markup--em markup--mixtapeEmbed-em">Load Testing ? HAProxy ? If all this seems greek to you, don’t worry. I will provide inline links to read up on what…</em>medium.com</a><a href="https://medium.com/@sachinmalhotra/load-testing-haproxy-part-1-f7d64500b75d" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="b4e074c36e4fe03700883e589ab06de8" data-thumbnail-img-id="1*4npSurj6b2n__CsxxnaUQw.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*4npSurj6b2n__CsxxnaUQw.png);"></a></div><p name="834b" id="834b" class="graf graf--p graf-after--mixtapeEmbed">This post will focus on the TCP Port exhaustion problem and how we can deal with it. In the last post we talked about how we can tune the kernel level and process level ulimit settings. This post is focussed on modifying the sysctl settings to get over the port exhaustion limits.</p><h3 name="ebc3" id="ebc3" class="graf graf--h3 graf-after--p">SYSCTL Local Port Range and Orphaned Sockets</h3><p name="ade3" id="ade3" class="graf graf--p graf-after--h3">Port exhaustion is a problem that will cause TCP communications with other machines over the network to fail. Most of the times there is a single process that leads to this problem and restarting it will fix the issue, temporarily. It will however come back to bite in a few hours or days depending on the system load.</p><p name="1eac" id="1eac" class="graf graf--p graf-after--p">Port exhaustion does not mean that the ports actually get tired. Of course, that is not possible because the computer is not human and the ports are not capable of getting tired. The truth is much more insidious. Port exhaustion simply means that the system does not have any more <em class="markup--em markup--p-em">ephemeral ports </em>left to communicate with other machines / servers.</p><p name="b353" id="b353" class="graf graf--p graf-after--p">Before going further, <em class="markup--em markup--p-em">let us understand what constitutes a TCP connection and what really does an inbound and an outbound connection means.</em></p><p name="4d78" id="4d78" class="graf graf--p graf-after--p">In majority of the cases whenever we talk about TCP connections and high scalability and ability to support concurrent connections, we usually refer to the number of inbound connections.</p><p name="12a7" id="12a7" class="graf graf--p graf-after--p">Say, the HAProxy is listening on port 443 for new inbound connections. If we say that the HAProxy can support X number of concurrent connections, what we really mean are X number of incoming connections and all of them are established on port 443 on the HAProxy machine.</p><p name="e89e" id="e89e" class="graf graf--p graf-after--p">If these connections are inbound for the HAProxy, then these have to be <em class="markup--em markup--p-em">outbound for the client machines where the connection originated. </em>Any sort of communication from the client requires them to initiate outbound connections to the servers.</p><blockquote name="370e" id="370e" class="graf graf--blockquote graf-after--p">When a connection is established over TCP, a socket is created on both the local and the remote host. These sockets are then connected to create a socket pair, which is described by a unique 4-tuple consisting of the local IP address and port along with the remote IP address and port.</blockquote><figure name="d060" id="d060" class="graf graf--figure graf-after--blockquote"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 222px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 31.8%;"></div><img class="graf-image" data-image-id="1*RTMxj2dEaOP0jxRS0II52Q.png" data-width="1410" data-height="448" src="https://cdn-images-1.medium.com/max/800/1*RTMxj2dEaOP0jxRS0II52Q.png"></div><figcaption class="imageCaption">3 TCP connections from client to server/proxy</figcaption></figure><p name="671f" id="671f" class="graf graf--p graf-after--figure">If you understood the concept of the quadruple, you will realise that in an outbound connection or rather multiple outbound connections to the SAME backend server, 2things always remain the same i.e. Destination IP and Destination Port. Assuming we are only taking into account a single client machine, the client IP will also remain the same.</p><p name="69b3" id="69b3" class="graf graf--p graf-after--p">This means that the number of outbound connections is dependent on the number of client ports that can be used for establishing the connection. While establishing an outbound connection, the source port is randomly selected from the ephemeral port range and this port gets freed up once the connection is destroyed. That’s why such ports are called as ephemeral ports.</p><p name="1a97" id="1a97" class="graf graf--p graf-after--p">By default, the total number of local ephemeral ports available are around 28000.</p><figure name="93c0" id="93c0" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 55px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 7.9%;"></div><img class="graf-image" data-image-id="1*wizxu4JbP_-59HRWOxNTbg.png" data-width="1036" data-height="82" src="https://cdn-images-1.medium.com/max/800/1*wizxu4JbP_-59HRWOxNTbg.png"></div></figure><p name="a382" id="a382" class="graf graf--p graf-after--figure">Now you might be thinking that 28k is a pretty large number and what can possibly cause 28k connections to get used up at a single point of time? In order to understand this, <strong class="markup--strong markup--p-strong">we have to understand the TCP connection lifecycle.</strong></p><p name="a8d1" id="a8d1" class="graf graf--p graf-after--p">During the TCP handshake, the connection state goes from</p><p name="1201" id="1201" class="graf graf--p graf-after--p">SYN_SENT → SYN_RECV → ESTABLISHED. Once the connection is in ESTABLISHED state, it means that the TCP connection is now active. <em class="markup--em markup--p-em">However, once the connection is terminated, </em>the local port that was being used earlier does not become active immediately.</p><p name="b22d" id="b22d" class="graf graf--p graf-after--p">The connection enters a state known as the <em class="markup--em markup--p-em">TIME_WAIT state for a period of 120 seconds before it is finally terminated. </em>This is a kernel level setting that exists to allow any delayed or out of order packets to be ignored by the network.</p><blockquote name="42e3" id="42e3" class="graf graf--blockquote graf-after--p">If you do the math, it won’t take more than<strong class="markup--strong markup--blockquote-strong"> 230 concurrent connections per second</strong> before the supposedly large limit of 28000 ephemeral ports on the system is reached. This limit is very easy to reach on proxies like HAProxy or NGINX because all the traffic is routed through them to the backend servers.</blockquote><p name="cf20" id="cf20" class="graf graf--p graf-after--blockquote">When a connection enters the TIME_WAIT state, it is known as an <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">orphaned socket</em></strong> because the TCP socket in this case is not help by any socket descriptor but are still held by the system for the designated time i.e. 120 seconds by default.</p><h3 name="8aa2" id="8aa2" class="graf graf--h3 graf-after--p">How to detect this?</h3><p name="c7d5" id="c7d5" class="graf graf--p graf-after--h3">Enough with all the theoretical stuff. Let’s jump in and see how we can identify if this limit has been hit on the system. There are two commands I absolutely love to use to find out the number of TCP connections established on the system.</p><h4 name="39b4" id="39b4" class="graf graf--h4 graf-after--p">ss (Socket Statistics)</h4><p name="b0bb" id="b0bb" class="graf graf--p graf-after--h4">The socket statistics command is a sort of replacement of the famous netstat command and is much faster than the netstat command in rendering information because it fetches the connections info directly from the kernel space. In order to get a hang of the different options supported by the ss command, check out</p><div name="da84" id="da84" class="graf graf--mixtapeEmbed graf-after--p"><a href="http://www.binarytides.com/linux-ss-command/" data-href="http://www.binarytides.com/linux-ss-command/" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://www.binarytides.com/linux-ss-command/"><strong class="markup--strong markup--mixtapeEmbed-strong">10 examples of Linux ss command to monitor network connections</strong><br><em class="markup--em markup--mixtapeEmbed-em">In a previous tutorial we saw how to use the netstat command to get statistics on network/socket connections. However…</em>www.binarytides.com</a><a href="http://www.binarytides.com/linux-ss-command/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="d00df2553001213c2bb541f65e1b78eb" data-thumbnail-img-id="0*CzGSu58bgHL_QyV1." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*CzGSu58bgHL_QyV1.);"></a></div><p name="5ca3" id="5ca3" class="graf graf--p graf-after--mixtapeEmbed">The `ss -s` command will show the total number of TCP established connections on the machine. If you see this reach the 28000 mark, it is very much possible that the ephemeral ports have been exhausted on that machine. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">BEWARE:</em></strong> This might be higher than the 28k number if multiple services are running on the same machine on different ports.</p><h4 name="8c67" id="8c67" class="graf graf--h4 graf-after--p">Netstat</h4><p name="3776" id="3776" class="graf graf--p graf-after--h4">The netstat command is a very famous command that provides information about all sorts of connections established on the machine’s networking stack.</p><pre name="2578" id="2578" class="graf graf--pre graf-after--p">sudo netstat -anptl </pre><p name="9e98" id="9e98" class="graf graf--p graf-after--pre">This will show you the details about all the connections on the machine. The details include</p><ul class="postList"><li name="1504" id="1504" class="graf graf--li graf-after--p">local address</li><li name="056f" id="056f" class="graf graf--li graf-after--li">remote address</li><li name="132e" id="132e" class="graf graf--li graf-after--li">connection state</li><li name="7508" id="7508" class="graf graf--li graf-after--li">process pid</li></ul><p name="59f8" id="59f8" class="graf graf--p graf-after--li">We can also use this to see if a single process has established 28k connections to an outbound server which gives us insights into the port exhaustion problem.</p><figure name="3bb6" id="3bb6" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 200px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.499999999999996%;"></div><img class="graf-image" data-image-id="1*sZemeif4fRCVwE56TnP44A.png" data-width="1486" data-height="424" src="https://cdn-images-1.medium.com/max/800/1*sZemeif4fRCVwE56TnP44A.png"></div></figure><p name="a67e" id="a67e" class="graf graf--p graf-after--figure">For eg:- the above image shows that a process with pid 9758 has established multiple connections with the foreign machine with IP 192.168.0.168 and port 443. As we can clearly see, on the source side of things, there are numerous ports being used.</p><pre name="eaae" id="eaae" class="graf graf--pre graf-after--p">sachinm@ip-192-168-0-122:~$ sudo netstat -anptl | grep &#39;192.168.0.168:443&#39; | cut -c69-79 | sort | uniq -c | sort -rn</pre><pre name="f3dd" id="f3dd" class="graf graf--pre graf-after--pre">5670 ESTABLISHED</pre><p name="5da7" id="5da7" class="graf graf--p graf-after--pre">This modified command will show the status of the different connections established with 192.168.0.168 on port 443. Currently there are 5670 connections. If this limit were to reach 28k, then you should look at options to increase the ephemeral port range on the machine.</p><p name="3ee7" id="3ee7" class="graf graf--p graf-after--p">Let’s look at another interesting command that you can issue at the server end or the proxy end to find out how many inbound connections have been established and by which IPs. So for example check out the result of the below command</p><pre name="c222" id="c222" class="graf graf--pre graf-after--p">ss -tan &#39;sport = :443&#39; | awk &#39;{print $(NF)&quot; &quot;$(NF-1)}&#39; | sed &#39;s/:[^ ]*//g&#39; | sort | uniq -c</pre><figure name="ca9b" id="ca9b" class="graf graf--figure graf-after--pre"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 256px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.5%;"></div><img class="graf-image" data-image-id="1*1QWzk7jbPFW_vXZ1f-M2Lw.png" data-width="2020" data-height="738" src="https://cdn-images-1.medium.com/max/800/1*1QWzk7jbPFW_vXZ1f-M2Lw.png"></div></figure><p name="f345" id="f345" class="graf graf--p graf-after--figure">This shows that there are about 14 different machines who have established around 2300 connections each with 192.168.0.168 and if you look at the command closely, we have filtered out results only for port 443.</p><p name="7e0d" id="7e0d" class="graf graf--p graf-after--p">Enough with finding the problem already. Let’s dive straight into finding the solution(s) to this problem.</p><h3 name="f22f" id="f22f" class="graf graf--h3 graf-after--p">What’s the way out?</h3><figure name="aec5" id="aec5" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 700px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 100%;"></div><img class="graf-image" data-image-id="1*KhacIUhbHawI68R-IRyD8A.png" data-width="960" data-height="960" src="https://cdn-images-1.medium.com/max/800/1*KhacIUhbHawI68R-IRyD8A.png"></div></figure><p name="68fb" id="68fb" class="graf graf--p graf-after--figure">Well don’t be afraid because sysctl just happens to be a friendly monster. There are many ways by which we can solve this problem.</p><h4 name="a197" id="a197" class="graf graf--h4 graf-after--p">Approach #1</h4><p name="d6fa" id="d6fa" class="graf graf--p graf-after--h4">One of the most practical approaches to solve this problem and one that you most likely will or rather should end up doing is to increase the local ephemeral port range to the maximum possible value. As mentioned before, the default range is very small.</p><pre name="34e5" id="34e5" class="graf graf--pre graf-after--p">echo 1024 65535 &gt; /proc/sys/net/ipv4/ip_local_port_range</pre><p name="cc9d" id="cc9d" class="graf graf--p graf-after--pre">This will increase the local port range to a bigger value. We cannot increase the range beyond this as there can only be a maximum of 65535 ports and the first 1024 are reserved for select services and purposes.</p><p name="930e" id="930e" class="graf graf--p graf-after--p">Note that you might still get bottleneck on this issue. However, instead of 28000 ports being used locally, it will be 64000 ports. Not a full proof solution but this is something that you can do to give you some breathing room.</p><p name="d6ea" id="d6ea" class="graf graf--p graf-after--p">Does this mean I can only get about 64k concurrent connections from a single client machine? The answer is NO.</p><figure name="d99a" id="d99a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 436px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.3%;"></div><img class="graf-image" data-image-id="1*SURvNQCUrxJ0KMyhii6uGQ.png" data-width="1550" data-height="966" src="https://cdn-images-1.medium.com/max/800/1*SURvNQCUrxJ0KMyhii6uGQ.png"></div></figure><p name="3fbc" id="3fbc" class="graf graf--p graf-after--figure">In this scenario, a single client machine will be able to generate about 120k concurrent connections because both the processes are connecting to two different backend servers or proxies and hence different destination IPs.</p><h4 name="cc97" id="cc97" class="graf graf--h4 graf-after--p">Approach #2</h4><p name="daa1" id="daa1" class="graf graf--p graf-after--h4">Another simple solution is to enable a Linux TCP option called <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tcp_tw_reuse. </em></strong>This option enables the Linux kernel to reclaim a connection slot from a connection in TIME_WAIT state and reallocate it to a new connection.</p><pre name="430a" id="430a" class="graf graf--pre graf-after--p">--&gt; vim /etc/sysctl.conf</pre><pre name="d9c7" id="d9c7" class="graf graf--pre graf-after--pre">--&gt; <strong class="markup--strong markup--pre-strong">Add the following line in the end</strong><br># Allow reuse of sockets in TIME_WAIT state for new connections<br># only when it is safe from the network stack’s perspective.<br>net.ipv4.tcp_tw_reuse = 1</pre><pre name="491e" id="491e" class="graf graf--pre graf-after--pre">--&gt; <strong class="markup--strong markup--pre-strong">Reload sysctl settings<br></strong>sysctl -p</pre><h4 name="dd82" id="dd82" class="graf graf--h4 graf-after--pre">Approach #3</h4><p name="2d46" id="2d46" class="graf graf--p graf-after--h4">Use more server ports. Till now we have talked about port exhaustion problems arising because in the quadruplet logic discussed before, the destination Ip, destination port and source Ip remain constant. The only thing that changes is the client ports.</p><p name="3f86" id="3f86" class="graf graf--p graf-after--p">However, if the server listens on two different ports instead of one, then we have twice the number of ephemeral ports available instead of one. This clubbed with the first approach gives you about 120k concurrent connections on a single machine.</p><p name="d739" id="d739" class="graf graf--p graf-after--p">You have to however take care that running the server on two ports — which essentially means running two servers on the same machine — does not have a huge impact on the hardware.</p><h4 name="0e97" id="0e97" class="graf graf--h4 graf-after--p">Approach #4</h4><p name="59d0" id="59d0" class="graf graf--p graf-after--h4">In a real production scenario, you may have millions of concurrent users simultaneously hitting the system. But in a load testing scenario, these users are to be artificially generated by a client running on a machine.</p><p name="5f91" id="5f91" class="graf graf--p graf-after--p">Here again the 65k port limit comes to bite on the client side. The only way to overcome this from the client’s perspective is to increase the number of client machines that are generating the load. As you will read the next part in this series you will find that we had to use about 14 different machines to generate the kind of load we wanted to test HAProxy.</p><h3 name="6722" id="6722" class="graf graf--h3 graf-after--p">Putting it all together</h3><p name="0e45" id="0e45" class="graf graf--p graf-after--h3">There isn’t one single configuration that will solve all your woes and work like a charm. It is always the combination of multiple things that work out in the end.</p><p name="a687" id="a687" class="graf graf--p graf-after--p">For us as a prerequisite to load testing HAProxy, we followed approach #1 and approach #2 and eventually approach #3 to generate a huge…huge load of <strong class="markup--strong markup--p-strong">2 million concurrent connections</strong> on a single HAProxy machine.</p><p name="7584" id="7584" class="graf graf--p graf-after--p"><a href="https://medium.freecodecamp.com/how-we-fine-tuned-haproxy-to-achieve-2-000-000-concurrent-ssl-connections-d017e61a4d27" data-href="https://medium.freecodecamp.com/how-we-fine-tuned-haproxy-to-achieve-2-000-000-concurrent-ssl-connections-d017e61a4d27" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Here’s the final part of this series</a>, where I’ll put together all the components that went into generating this kind of load, the tunings we did and the learnings that came out of it.</p><p name="3958" id="3958" class="graf graf--p graf-after--p graf--trailing">Do let me know how this blog post helped you and stay tuned for the final part in this series of posts. Also, please recommend (❤) this post if you think this may be useful for someone.</p></div></div></section>
</section>
</article></body></html>-->
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/03/19/Load-Testing-HAProxy-Part-1-f7d64500b75d/">
        Load Testing HAProxy (Part 1)
      </a>
    </h1>

    <span class="post-date">19 Mar 2017</span>
  
    
    <!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 1)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 1)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.
</section>
<section data-field="body" class="e-content">
<section name="32f4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f5c9" id="f5c9" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="d9b7" id="d9b7" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="1*cj6DXYTZl0q9RDR-3mil7g.jpeg" data-width="1125" data-height="750" src="https://cdn-images-1.medium.com/max/2000/1*cj6DXYTZl0q9RDR-3mil7g.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="33bc" id="33bc" class="graf graf--p graf-after--figure">This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.
    <br>
    <a href="/2017/03/19/Load-Testing-HAProxy-Part-1-f7d64500b75d/">
         Read More...
    </a>
    <hr>
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 1)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 1)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.
</section>
<section data-field="body" class="e-content">
<section name="32f4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f5c9" id="f5c9" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="d9b7" id="d9b7" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="1*cj6DXYTZl0q9RDR-3mil7g.jpeg" data-width="1125" data-height="750" src="https://cdn-images-1.medium.com/max/2000/1*cj6DXYTZl0q9RDR-3mil7g.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="33bc" id="33bc" class="graf graf--p graf-after--figure">This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.  <p name="abe4" id="abe4" class="graf graf--p graf-after--p">Load Testing? HAProxy? If all this seems greek to you, don’t worry. I will provide inline links to read up on everything I’m talking about in this blog post.-->
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Load Testing HAProxy (Part 1)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Load Testing HAProxy (Part 1)</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.
</section>
<section data-field="body" class="e-content">
<section name="32f4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f5c9" id="f5c9" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="d9b7" id="d9b7" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.7%;"></div><img class="graf-image" data-image-id="1*cj6DXYTZl0q9RDR-3mil7g.jpeg" data-width="1125" data-height="750" src="https://cdn-images-1.medium.com/max/2000/1*cj6DXYTZl0q9RDR-3mil7g.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="33bc" id="33bc" class="graf graf--p graf-after--figure">This is the first post in a 3 part series on load testing HAProxy, which is a reliable, high performant TCP/HTTP load balancer.</p><p name="abe4" id="abe4" class="graf graf--p graf-after--p">Load Testing? HAProxy? If all this seems greek to you, don’t worry. I will provide inline links to read up on everything I’m talking about in this blog post.</p><p name="c2aa" id="c2aa" class="graf graf--p graf-after--p">For reference, our current stack is:</p><ul class="postList"><li name="71cf" id="71cf" class="graf graf--li graf-after--p">Instances hosted on <a href="https://aws.amazon.com/ec2/" data-href="https://aws.amazon.com/ec2/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Amazon EC2</a> (not that this one should matter)</li><li name="7cfe" id="7cfe" class="graf graf--li graf-after--li">Ubuntu 14.04 (Trusty) for the OS</li><li name="a566" id="a566" class="graf graf--li graf-after--li"><a href="http://supervisord.org/" data-href="http://supervisord.org/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Supervisor</a> for process management</li></ul><p name="a8ed" id="a8ed" class="graf graf--p graf-after--li">On production, we have around 30-odd <a href="https://serversforhackers.com/load-balancing-with-haproxy" data-href="https://serversforhackers.com/load-balancing-with-haproxy" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">HAProxy</a> load balancers that help us route our traffic to the backend servers which are in an autoscaling mode and hence don’t have a fixed number. Number of backend servers ranges from 12–32 throughout the day.</p><p name="5f2b" id="5f2b" class="graf graf--p graf-after--p"><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-haproxy-and-load-balancing-concepts" data-href="https://www.digitalocean.com/community/tutorials/an-introduction-to-haproxy-and-load-balancing-concepts" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">This article</a> should help you get up-to-speed on the basics of load balancing and how it works with HAProxy. It will also explain what routing algorithms are available.</p><p name="2b7b" id="2b7b" class="graf graf--p graf-after--p">Coming back to our topic at hand, which is load testing HAProxy.</p><p name="00b5" id="00b5" class="graf graf--p graf-after--p">Never before did we put any dedicated effort in finding out the limits of our HAProxy setup in handling HTTP and HTTPs requests. Currently, on production, we have 4 core, 30 Gig instances of HAProxy machines.</p><div name="d45f" id="d45f" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://aws.amazon.com/about-aws/whats-new/2016/11/introducing-amazon-ec2-r4-instances-the-next-generation-of-memory-optimized-instances/" data-href="https://aws.amazon.com/about-aws/whats-new/2016/11/introducing-amazon-ec2-r4-instances-the-next-generation-of-memory-optimized-instances/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://aws.amazon.com/about-aws/whats-new/2016/11/introducing-amazon-ec2-r4-instances-the-next-generation-of-memory-optimized-instances/"><strong class="markup--strong markup--mixtapeEmbed-strong">Introducing Amazon EC2 R4 Instances, the next generation of memory-optimized instances</strong><br><em class="markup--em markup--mixtapeEmbed-em">You can now launch R4 instances, the next generation of Amazon EC2 Memory Optimized instances, featuring a larger…</em>aws.amazon.com</a><a href="https://aws.amazon.com/about-aws/whats-new/2016/11/introducing-amazon-ec2-r4-instances-the-next-generation-of-memory-optimized-instances/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3df49ed9af24d838369e3d1069271f44" data-thumbnail-img-id="0*wwyTimwAps6HvAiJ." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*wwyTimwAps6HvAiJ.);"></a></div><p name="1f7b" id="1f7b" class="graf graf--p graf-after--mixtapeEmbed">As I am writing this post, we’re in the process of moving our entire traffic (HTTP) to HTTPs (that is, encrypted traffic). But before moving further, we needed some definitive answers to the following questions:</p><ol class="postList"><li name="3589" id="3589" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">What is the impact as we shift our traffic from Non-SSL to SSL?</strong> CPU should definitely take a hit because SSL handshake is not a normal 3 way handshake, it is rather a 5 way handshake and after the handshake is complete, further communication is encrypted using the secret key generated during the handshake and this is bound to take up CPU.</li><li name="0455" id="0455" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">What are some other hardware/software limits that might be reached on production as a result of SSL termination at the HAProxy level</strong>. We could also go for the SSL PassThrough option provided by HAProxy which terminates/decrypts the SSL connection at the backend servers. However, SSL termination at the HAProxy level is more performant and so this is what we intend to test.</li><li name="9718" id="9718" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">What is the best hardware required on production to support the kind of load that we see today</strong>. Will the existing hardware scale or do we need bigger machines? This was also one of the prime questions we wanted an answer to via this test.</li></ol><p name="872c" id="872c" class="graf graf--p graf-after--li">For this purpose we put in a dedicated effort for load testing HAProxy version 1.6 to find out answers to the above questions. I won’t be outlining the approach we took nor will I be outlining the results of this exercise in this blog post.</p><p name="4c8e" id="4c8e" class="graf graf--p graf-after--p">Rather, I will be discussing an important aspect of any load testing exercise that most of us tend to ignore.</p><h3 name="65af" id="65af" class="graf graf--h3 graf-after--p">The Ulimiter</h3><p name="7595" id="7595" class="graf graf--p graf-after--h3">If you have ever done any kind of load testing or hosted any server serving a lot of concurrent requests, you definitely would have run into the dreaded <em class="markup--em markup--p-em">“Too many open files”</em> issue.</p><figure name="ec91" id="ec91" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 400px; max-height: 398px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 99.5%;"></div><img class="graf-image" data-image-id="1*4npSurj6b2n__CsxxnaUQw.png" data-width="400" data-height="398" src="https://cdn-images-1.medium.com/max/800/1*4npSurj6b2n__CsxxnaUQw.png"></div></figure><p name="c0b6" id="c0b6" class="graf graf--p graf-after--figure">An important part of any stress testing exercise is the ability of your load testing client to establish a lot of concurrent connections to your backend server or to the proxy like HAProxy in between.</p><p name="7408" id="7408" class="graf graf--p graf-after--p">A lot of times we end up being bottleneck on the client not being able to generate the amount of load we expect it to generate. The reason for this is not because the client is not performing optimally, but something else entirely on the hardware level.</p><p name="063f" id="063f" class="graf graf--p graf-after--p">Ulimit is used to restrict the number of user level resources. For all practical purposes pertaining to load testing environments, ulimit gives us the number of file descriptors that can be opened by a single process on the system. On most machines if you check the limit on file descriptors, it comes out to be this number = <strong class="markup--strong markup--p-strong">1024.</strong></p><figure name="f449" id="f449" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 466px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.5%;"></div><img class="graf-image" data-image-id="1*qE7hD6O7lsA1RtbXwspdow.png" data-width="974" data-height="648" src="https://cdn-images-1.medium.com/max/800/1*qE7hD6O7lsA1RtbXwspdow.png"></div><figcaption class="imageCaption">Staging Ulimit Config</figcaption></figure><p name="3184" id="3184" class="graf graf--p graf-after--figure">As you can see, the number of open files is 1024 it on our staging setup. Opening a new TCP connection / socket also counts as an open file or a file descriptor and hence the limitation.</p><p name="3261" id="3261" class="graf graf--p graf-after--p">What this generally means is that a single client process can only open 1024 connections to the backend servers and no more. It means you need to increase this limit to a very high number on your load testing environment before proceeding further. Checkout the ulimit setting we have on our production machines.</p><figure name="54d3" id="54d3" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 522px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 74.6%;"></div><img class="graf-image" data-image-id="1*6QbQnvAF0m7v5OA2ko0fNw.png" data-width="866" data-height="646" src="https://cdn-images-1.medium.com/max/800/1*6QbQnvAF0m7v5OA2ko0fNw.png"></div><figcaption class="imageCaption">Production Level Ulimit config</figcaption></figure><p name="0954" id="0954" class="graf graf--p graf-after--figure">This information is what you would generally find after 10 seconds of Googling, but keep in mind that <em class="markup--em markup--p-em">ulimit is not guaranteed to give you the limits your processes actually have!</em> There’s a million things that can modify a limits of a process after (or before) you initialized your shell. So what you should do instead is fire up <code class="markup--code markup--p-code">top</code>, <code class="markup--code markup--p-code"><a href="http://hisham.hm/htop/" data-href="http://hisham.hm/htop/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">htop</a></code>, <code class="markup--code markup--p-code">ps</code>, or whatever you want to use to get the ID of the problematic process, and do a <code class="markup--code markup--p-code">cat /proc/{process_id}/limits</code>:</p><figure name="2f59" id="2f59" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 445px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 63.6%;"></div><img class="graf-image" data-image-id="1*oVCiJir-1oICfl7rxIGwfw.png" data-width="1186" data-height="754" src="https://cdn-images-1.medium.com/max/800/1*oVCiJir-1oICfl7rxIGwfw.png"></div></figure><blockquote name="e0bd" id="e0bd" class="graf graf--blockquote graf-after--figure">The max open files for this specific process is different than the system wide limits we have on this server.</blockquote><p name="3751" id="3751" class="graf graf--p graf-after--blockquote">Let’s move on to the interesting part. Raising the limits :D</p><h3 name="deb2" id="deb2" class="graf graf--h3 graf-after--p">The Stuff You Came Here to Read: Raising the Limit</h3><p name="7656" id="7656" class="graf graf--p graf-after--h3">There are two ways of changing the ulimit setting on a machine.</p><ol class="postList"><li name="54ff" id="54ff" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">ulimit -n &lt;some_value&gt;. </em></strong>This will change the ulimit settings only for the current shell session. As soon as you open another shell session, you are back to square one i.e. 1024 file descriptors. So this is probably not what you want.</li><li name="25d0" id="25d0" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">fs.file-max = 500000</em></strong>. Add this line to the end of the file <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">/etc/sysctl.conf. </em></strong>And add the following<br><code class="markup--code markup--li-code">* soft nofile </code><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">500000</em></strong><code class="markup--code markup--li-code"><br>* hard nofile </code><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">500000</em></strong><code class="markup--code markup--li-code"><br>root soft nofile </code><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">500000</em></strong><code class="markup--code markup--li-code"><br>root hard nofile </code><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">500000<br></em></strong>to the file <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">/etc/security/limits.conf.</em></strong></li></ol><p name="f517" id="f517" class="graf graf--p graf-after--li">The * basically represents that we are setting these values for all the users except root. “soft or hard” basically represent soft or hard limits. The next entry specifies the item for which we want to change the limit values i.e. nofile in this case which means the number of open files . And finally we have the value we wanna set which in this case is 500000. The * here does not apply to a root user, hence the last two lines specially for the root user.</p><p name="8ced" id="8ced" class="graf graf--p graf-after--p">After doing this, you need to take a reboot of the system. Sadly yes :( And the changes should reflect in the ulimit -n command.</p><figure name="173e" id="173e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 79px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 11.3%;"></div><img class="graf-image" data-image-id="1*kUNMdQiWHLOilGmSNXOVZA.png" data-width="760" data-height="86" src="https://cdn-images-1.medium.com/max/800/1*kUNMdQiWHLOilGmSNXOVZA.png"></div></figure><p name="e5bf" id="e5bf" class="graf graf--p graf-after--figure">Hurray !. Pat yourself on the back. You successfully changed the ulimit settings for the system. However, it is not necessary that changing this will affect all the user processes running on the system. It is quite possible that even after changing the system wide ulimit, you might find that <em class="markup--em markup--p-em">/etc/&lt;pid&gt;/limits</em> give you a smaller number than what you might expect to find.</p><figure name="fa5b" id="fa5b" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 400px; max-height: 400px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 100%;"></div><img class="graf-image" data-image-id="1*7ZiJ5StrDzfIohN9QZeOqQ.png" data-width="400" data-height="400" src="https://cdn-images-1.medium.com/max/800/1*7ZiJ5StrDzfIohN9QZeOqQ.png"></div></figure><p name="eafa" id="eafa" class="graf graf--p graf-after--figure">In this case, you almost certainly have a process manager, or something similar that is messing up your limits. You need to keep in mind that processes inherit the limits of their parent processes. So if you have something like a Supervisor managing your processes, they will inherit the settings of the Supervisor daemon and this overrides any changes you make to the system level limits.</p><p name="4886" id="4886" class="graf graf--p graf-after--p"><a href="http://supervisord.org/configuration.html#supervisord-section-values" data-href="http://supervisord.org/configuration.html#supervisord-section-values" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Supervisor has a config variable</a> that sets the file descriptor limit of its main process. Apparently, this setting is in turn inherited by any and all processes it launches. To override the default setting, you can add the following line to <code class="markup--code markup--p-code">/etc/supervisor/supervisord.conf</code>, in the <code class="markup--code markup--p-code">[supervisord]</code>section:</p><pre name="4fcf" id="4fcf" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">minfds=500000</code></pre><p name="9aca" id="9aca" class="graf graf--p graf-after--pre">Updating this will lead to all the child processes being controlled by supervisor inheriting this updated limit. You just need to restart the supervisor daemon to bring this change into effect.</p><p name="443b" id="443b" class="graf graf--p graf-after--p">Remember to do this on any machine that intends to have a lot of concurrent connections open. Be it the client in a load testing scenario or a server trying to serve a lot of concurrent requests.</p><p name="5997" id="5997" class="graf graf--p graf-after--p"><a href="https://medium.com/p/4c8677780df6" data-href="https://medium.com/p/4c8677780df6" class="markup--anchor markup--p-anchor" target="_blank">In Part 2</a>, we’ll learn how to deal with the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Sysctl port range monster</em></strong>.</p><p name="0e8b" id="0e8b" class="graf graf--p graf-after--p graf--trailing">Do let me know how this blog post helped you. Also, please recommend (❤) this post if you think this may be useful for someone.</p></div></div></section>
</section>
</article></body></html>-->
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2017/02/10/Are-you-Bored-ce374915696/">
        The Graduate Record Examination (GRE)
      </a>
    </h1>

    <span class="post-date">10 Feb 2017</span>
  
    
    <!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Are you Bored ?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Are you Bored ?</h1>
</header>
<section data-field="subtitle" class="p-summary">
In case you are extremely bored, I have something for you.
</section>
<section data-field="body" class="e-content">
<section name="b739" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bf72" id="bf72" class="graf graf--h3 graf--leading graf--title"></h3><p name="83b9" id="83b9" class="graf graf--p graf-after--h3">In case you are extremely bored, I have something for you.
    <br>
    <a href="/2017/02/10/Are-you-Bored-ce374915696/">
         Read More...
    </a>
    <hr>
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Are you Bored ?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Are you Bored ?</h1>
</header>
<section data-field="subtitle" class="p-summary">
In case you are extremely bored, I have something for you.
</section>
<section data-field="body" class="e-content">
<section name="b739" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bf72" id="bf72" class="graf graf--h3 graf--leading graf--title"></h3><p name="83b9" id="83b9" class="graf graf--p graf-after--h3">In case you are extremely bored, I have something for you.  </div><div class="section-inner sectionLayout--fullWidth"><figure name="2560" id="2560" class="graf graf--figure graf--layoutFillWidth graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.6%;"></div><img class="graf-image" data-image-id="1*1RtBcTWKyiTB8MIHr1bwKw.jpeg" data-width="1100" data-height="535" src="https://cdn-images-1.medium.com/max/2000/1*1RtBcTWKyiTB8MIHr1bwKw.jpeg"></div><figcaption class="imageCaption">A Cheeseburger</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c45c" id="c45c" class="graf graf--p graf-after--figure graf--trailing">A delicious cheeseburger for my extremely bored audience. Just kidding. I just wanted to get your attention. This is going to be a fairly long post about how one should go about preparing for the Graduate Record Examination ;)-->
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Are you Bored ?</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Are you Bored ?</h1>
</header>
<section data-field="subtitle" class="p-summary">
In case you are extremely bored, I have something for you.
</section>
<section data-field="body" class="e-content">
<section name="b739" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bf72" id="bf72" class="graf graf--h3 graf--leading graf--title"></h3><p name="83b9" id="83b9" class="graf graf--p graf-after--h3">In case you are extremely bored, I have something for you.</p></div><div class="section-inner sectionLayout--fullWidth"><figure name="2560" id="2560" class="graf graf--figure graf--layoutFillWidth graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.6%;"></div><img class="graf-image" data-image-id="1*1RtBcTWKyiTB8MIHr1bwKw.jpeg" data-width="1100" data-height="535" src="https://cdn-images-1.medium.com/max/2000/1*1RtBcTWKyiTB8MIHr1bwKw.jpeg"></div><figcaption class="imageCaption">A Cheeseburger</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c45c" id="c45c" class="graf graf--p graf-after--figure graf--trailing">A delicious cheeseburger for my extremely bored audience. Just kidding. I just wanted to get your attention. This is going to be a fairly long post about how one should go about preparing for the Graduate Record Examination ;)</p></div></div></section><section name="eece" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2f52" id="2f52" class="graf graf--h3 graf--leading">The GRE</h3><p name="13b6" id="13b6" class="graf graf--p graf-after--h3">This post is for someone preparing for the GRE test in the coming future and wants a prolonged set of explanations about resources and do’s and don’ts about the examination. I’ll be mentioning all the resources and materials that I had used to prepare for my exam. Just to provide myself some credibility, here are my exam scores.</p><blockquote name="5f89" id="5f89" class="graf graf--blockquote graf-after--p">Quant = 164, Verbal = 155, AWA = 5.0 [GRE]</blockquote><blockquote name="7902" id="7902" class="graf graf--blockquote graf-after--blockquote">Reading = 30, Listening = 29, Speaking = 28 and Writing = 30 [TOEFL]</blockquote><p name="002f" id="002f" class="graf graf--p graf-after--blockquote">I spent about 6–8 months to get through these exams. I procrastinated a lot but I did put in a dedicated effort for the last couple of months and I dedicate my score to that effort itself. I did a lot of research on the materials I should use for my preparation and I’ll be providing an extensive list of materials here in this blog post.</p><h3 name="f278" id="f278" class="graf graf--h3 graf-after--p">Getting to know the GRE</h3><p name="3e8b" id="3e8b" class="graf graf--p graf-after--h3">A score of 320+ is considered to be a great score if you are someone like me who has absolutely <strong class="markup--strong markup--p-strong">0 research experience. </strong>It is not really a difficult task to get this score. If you know about the pattern of the exam, you know that students are mostly frightened by the long list of vocabulary words that they have to cram and retain. But fear not, you don’t need to do that to get a great score. Let me first break down the exam into various components for you.</p><p name="b742" id="b742" class="graf graf--p graf-after--p">The exam has a total of 4 sections apart and 2 essay writing sections. 2 Quant, 2 verbal sections and 2 essays. The essays are Issue Essay and the Argument Essay.</p><p name="0d35" id="0d35" class="graf graf--p graf-after--p">Issue Essay (30 minutes), Argument Essay(30 minutes), 2 * Quant (25 questions in 35 minutes), 2 * Verbal (20 questions in 30 minutes) amounts to about 3 hours and 10 minutes. There is a 15 minutes break after your AWA and 2 other sections. AWA is the first section on the GRE and you cannot skip forward before attempting this section.</p><p name="addc" id="addc" class="graf graf--p graf-after--p">Just when you think that after a strenuous 3 hours of sitting, you’ll sail off into the sunset with a great score, the ETS guys tell you to</p><figure name="15f1" id="15f1" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 630px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 90%;"></div><img class="graf-image" data-image-id="1*aaiZIbm7foPFbckanBzAag.png" data-width="1000" data-height="900" src="https://cdn-images-1.medium.com/max/800/1*aaiZIbm7foPFbckanBzAag.png"></div></figure><p name="4ead" id="4ead" class="graf graf--p graf-after--figure">ETS also has a research section waiting for you somewhere in the exam. It can be either verbal or quant and the BEST (worst ;P) part is that you don’t know which section on the test is the research section. So as a student, you have to give your level best in every section. That makes the GRE a 4 hour beast of an exam that requires a lot of focus and will to get through.</p><p name="697f" id="697f" class="graf graf--p graf-after--p">The test is adaptive , the next question will be supposedly tougher or easier based on how you attempted the previous questions.</p><h3 name="d6cc" id="d6cc" class="graf graf--h3 graf-after--p">Verbal Question Types</h3><p name="46a1" id="46a1" class="graf graf--p graf-after--h3">The verbal section consists of various question types. These are</p><ul class="postList"><li name="926b" id="926b" class="graf graf--li graf-after--p">Sentence Equivalence</li><li name="39cb" id="39cb" class="graf graf--li graf-after--li">Text Completion</li><li name="cdbe" id="cdbe" class="graf graf--li graf-after--li">Reading Comprehension and</li><li name="6c23" id="6c23" class="graf graf--li graf-after--li">Paragraph Argument.</li></ul><p name="b85e" id="b85e" class="graf graf--p graf-after--li">I won’t be providing the details for each of these questions in this blog post. Such details can easily be found on <a href="https://www.ets.org/gre/revised_general/about/content/" data-href="https://www.ets.org/gre/revised_general/about/content/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ETS’s website</a>. The Text completion is further of three types.</p><ul class="postList"><li name="f871" id="f871" class="graf graf--li graf-after--p">Single Blank</li><li name="9b8a" id="9b8a" class="graf graf--li graf-after--li">Double Blank and</li><li name="bcb1" id="bcb1" class="graf graf--li graf-after--li">Triple Blank text completion.</li></ul><p name="e875" id="e875" class="graf graf--p graf-after--li">For me, the Reading Comprehension is the toughest part of the verbal section. Out of the 40 questions you will get in the 2 verbal sections (excluding the research section here), approximately 16 questions are RCs. These need a lot of practice and patience to get through. Especially because of the convoluted text structure often found in the paragraphs.</p><h3 name="fa23" id="fa23" class="graf graf--h3 graf-after--p">Quant Question Types</h3><p name="b4ca" id="b4ca" class="graf graf--p graf-after--h3">The Quant section on the GRE is comprised of 4 major sections</p><ul class="postList"><li name="792b" id="792b" class="graf graf--li graf-after--p">Algebra</li><li name="0f4b" id="0f4b" class="graf graf--li graf-after--li">Geometry</li><li name="9ca7" id="9ca7" class="graf graf--li graf-after--li">Arithmetic</li><li name="f5a3" id="f5a3" class="graf graf--li graf-after--li">Data Analysis.</li></ul><p name="6145" id="6145" class="graf graf--p graf-after--li">As a part of these 4 sections, there is a lot of content to be covered. Again, the quant syllabus can be easily found on the ETS website or in the ETS official GRE book. The quant section is comprised of questions which any engineer would have encountered in their 10th class or during their Bachelors. This section is supposedly easier or rather way too easy as opposed to its counterpart, but being overconfident can be surely detrimental to your score. Getting a complete 170 in the Quant section requires a lot of practice and focus .In case you manage to get a perfect quant score, even a smaller verbal score something like 155 would mean a total of 325, which is awesome.</p><h3 name="324e" id="324e" class="graf graf--h3 graf-after--p">Resources</h3><p name="5c14" id="5c14" class="graf graf--p graf-after--h3 graf--trailing"><strong class="markup--strong markup--p-strong">The primary resource</strong> I would pick up any day of the week for Verbal prep is <a href="http://www.amazon.in/Word-Power-Made-Norman-Lewis/dp/8183071007?tag=googinhydr18418-21&amp;tag=googinkenshoo-21&amp;ascsubtag=43b85d9f-fcbb-4d2f-8c7c-15ee667692bb" data-href="http://www.amazon.in/Word-Power-Made-Norman-Lewis/dp/8183071007?tag=googinhydr18418-21&amp;tag=googinkenshoo-21&amp;ascsubtag=43b85d9f-fcbb-4d2f-8c7c-15ee667692bb" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Word Power Made Easy by Normal Lewis.</a> The book does not contain a lot of GRE words, however, it does strive to make you fall in love with <a href="https://www.google.co.in/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=etymology" data-href="https://www.google.co.in/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=etymology" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">etymology</a> and vocabulary in particular. After completing the book you will know how to identify words by their roots. This should be done if you have &gt; 2 months in hand for your preparation. If not, you can skip this.</p></div></div></section><section name="cefa" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="eab4" id="eab4" class="graf graf--p graf--leading graf--trailing"><strong class="markup--strong markup--p-strong">Next resource</strong> I would recommend is the <a href="https://www.flipkart.com/gre-official-guide-revised-general-test/p/itme9tex8ch4m6au?gclid=CP3Z0rOwhNICFcGOaAodoigJKw&amp;pid=9780071791236&amp;cmpid=content_book_8965229628_gmc_pla&amp;tgi=sem%2C1%2CG%2C11214002%2Cg%2Csearch%2C%2C170219493259%2C1o2%2C%2C%2Cc%2C%2C%2C%2C%2C%2C%2C&amp;s_kwcid=AL%21739%213%21170219493259%21%21%21g%2151320962143%21&amp;ef_id=WJ0XaQAAAB84RA1Y%3A20170210012913%3As" data-href="https://www.flipkart.com/gre-official-guide-revised-general-test/p/itme9tex8ch4m6au?gclid=CP3Z0rOwhNICFcGOaAodoigJKw&amp;pid=9780071791236&amp;cmpid=content_book_8965229628_gmc_pla&amp;tgi=sem%2C1%2CG%2C11214002%2Cg%2Csearch%2C%2C170219493259%2C1o2%2C%2C%2Cc%2C%2C%2C%2C%2C%2C%2C&amp;s_kwcid=AL%21739%213%21170219493259%21%21%21g%2151320962143%21&amp;ef_id=WJ0XaQAAAB84RA1Y%3A20170210012913%3As" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ETS Official GRE Book</a>. ETS guys are the test makers themselves and this book contains questions and practice tests filled with official GRE content. There are 4 practice tests to be done here. 2 paper based and 2 software based. The software based tests model the actual exam perfectly and one should strive to give one of these a couple of days before the exam to get a rough estimate of the score you will get on the actual test day.</p></div></div></section><section name="40ca" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="d15c" id="d15c" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">Third up on my list</strong> is <a href="https://gre.magoosh.com/plans" data-href="https://gre.magoosh.com/plans" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Magoosh GRE Prep</a>. This is a PAID service mind you but I guess these guys nail the preparation perfectly. About a year back, I had joined <a href="http://www.jamboreeindia.com" data-href="http://www.jamboreeindia.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Jambooree</a> classes for GRE prep and they took about 25k INR for a couple of months of prep. The Magoosh guys charged around 7–8k INR for a period of 6 months and their questions and content are way better than the Jambooree ones. I guess anyone looking to join classes over the weekend or something for GRE prep should rather take up the online offering by Magoosh. You won’t repent this decision.</p><p name="c141" id="c141" class="graf graf--p graf-after--p">They have around 1000 questions for practice. Around 100–150 videos for covering the concepts of both Verbal and Quant. Plus, for every practice question you get a video explanation.</p><figure name="a315" id="a315" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 500px; max-height: 359px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 71.8%;"></div><img class="graf-image" data-image-id="1*u3Pu0AF2PZutRjr1ESMkWA.jpeg" data-width="500" data-height="359" src="https://cdn-images-1.medium.com/max/800/1*u3Pu0AF2PZutRjr1ESMkWA.jpeg"></div></figure></div></div></section><section name="6e46" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="c1ba" id="c1ba" class="graf graf--p graf--leading graf--trailing"><strong class="markup--strong markup--p-strong">Fourth up on my list</strong> are two other practice books offered up by the ETS guys. The official guide has 4 practice tests, but lacks in practice questions topic wise. So as an additional offering, they have <a href="http://www.amazon.in/Official-Verbal-Reasoning-Practice-Questions/dp/9339217969?tag=googinhydr18418-21&amp;tag=googinkenshoo-21&amp;ascsubtag=43b85d9f-fcbb-4d2f-8c7c-15ee667692bb" data-href="http://www.amazon.in/Official-Verbal-Reasoning-Practice-Questions/dp/9339217969?tag=googinhydr18418-21&amp;tag=googinkenshoo-21&amp;ascsubtag=43b85d9f-fcbb-4d2f-8c7c-15ee667692bb" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ETS Verbal Reasoning Practice questions</a> and <a href="http://www.amazon.in/Official-Quantitative-Reasoning-Practice-Questions/dp/9339217977/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486690728&amp;sr=1-1&amp;keywords=ets+quantitative+reasoning+practice" data-href="http://www.amazon.in/Official-Quantitative-Reasoning-Practice-Questions/dp/9339217977/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1486690728&amp;sr=1-1&amp;keywords=ets+quantitative+reasoning+practice" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ETS Quant Practice questions</a>. Both these books contain 150 questions each for practice and these are official GRE questions from the test-makers themselves.</p></div></div></section><section name="628a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="b056" id="b056" class="graf graf--p graf--leading graf--trailing"><strong class="markup--strong markup--p-strong">When preparing for the GRE</strong>, it is really important to give a lot of mock tests before actually going for the exam. That’s because you will get to know if you have that kind of sitting and also your weaknesses in a time constrained environment. There is an awesome list of 33 free mock tests available on <a href="https://crunchprep.com/gre/2014/free-gre-practice-tests" data-href="https://crunchprep.com/gre/2014/free-gre-practice-tests" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Crunchprep</a> which you should definitely take up (Not all, but at-least 5–6 of them are a must).</p></div></div></section><section name="c8da" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="1dbf" id="1dbf" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">The Magoosh blog</strong> is an ocean of free content on the GRE. It contains a lot of articles on vocabulary, difficult and confusing words, strategies and what not. You will more likely than not find an article on their blog that solves your doubts. Also, you can post your comments on the blog itself and the Magoosh team responds fairly quickly.</p><h3 name="5bb9" id="5bb9" class="graf graf--h3 graf-after--p">Reading and Vocabulary</h3><p name="aa1a" id="aa1a" class="graf graf--p graf-after--h3">One of the two most dreaded parts of the GRE exam is the vocabulary section. The exam does not directly ask the meaning of difficult words. This is not something they like to test. So cramming up huge word lists will do you no good. There are a number of word lists available online like Barron’s and Kaplan’s Flashcards, however, cramming them up is equivalent to not doing anything at all.</p><p name="161f" id="161f" class="graf graf--p graf-after--p graf--trailing">What the GRE is interested in testing is your ability to comprehend the meaning of the content in-front of you and then answer the question. They test your ability to understand the meaning of the given sentence or paragraph. Sure, knowing the definition of the words really helps, but that’s just the tip of the iceberg. You need to understand the usage of the word in various contexts as well.</p></div></div></section><section name="d21f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="fd70" id="fd70" class="graf graf--p graf--leading"><a href="https://gre.magoosh.com/flashcards/vocabulary/decks" data-href="https://gre.magoosh.com/flashcards/vocabulary/decks" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Magoosh Flashcards</a> have provided a great vocabulary flashcards application that lets you learn the words along with a sentence effectively. They have divided up the words into three decks namely Common,Basic and Advanced.</p><blockquote name="b31a" id="b31a" class="graf graf--blockquote graf-after--p graf--trailing">For the GRE, you can skip the Advanced deck but thoroughly go through the Common and the Basic ones.</blockquote></div></div></section><section name="7ea8" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="1d0d" id="1d0d" class="graf graf--p graf--leading graf--trailing"><a href="http://wordnik.com" data-href="http://wordnik.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Wordnik</strong></a> is great website which provides sentences for the searched words and the best part is that wordnik pulls off the sentences from world class magazines like The New York Times, The Atlantic etc. For all the words which you don’t understand, please check out the sentences on wordnick for greater clarity on the context usage for the word.</p></div></div></section><section name="d67f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="c696" id="c696" class="graf graf--p graf--leading graf--trailing"><a href="https://www.vocabulary.com/" data-href="https://www.vocabulary.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Vocabulary.com</strong></a> is another great resource out there for learning vocabulary words. A lot of times the meaning provided by the Magoosh flashcards are not enough. So for getting a better understanding of the meaning of a word, you can check out this website. It has an excellent UI and provides insane definitions and examples for a lot of words.</p></div></div></section><section name="f2a0" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="04ac" id="04ac" class="graf graf--p graf--leading graf--trailing"><a href="http://quizlet.com" data-href="http://quizlet.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Quizlet</strong></a> is like a gold mine for leaning stuff like definitions etc. Quizlet lets you create flashcards on the go where you provide the word, the definition, an image if it helps you remember the definition etc. The fun part is that it lets you create your own study sets comprising of flashcards and then provides various games and quiz on top of it. That is a great way of learning stuff like vocabulary. You can jot down difficult to remember words in different sets and then practice them over and over until you master them.</p></div></div></section><section name="8ff6" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="3bd1" id="3bd1" class="graf graf--p graf--leading"><strong class="markup--strong markup--p-strong">Apart from learning vocabulary words effectively, you also need to do a lot of reading</strong> to nail reading comprehension. RC is a tough beast to conquer and the only way to do this is by reading a lot of good prose. I’m not talking about fiction novels like Harry Potter etc. I’m talking about difficult prose that you would otherwise never read during your leisure time. Something like art, culture, governments, novel reviews, poetry reviews. An amazing website that provides content like this is <a href="https://www.aldaily.com/" data-href="https://www.aldaily.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">aldaily</a>.</p><h3 name="d6af" id="d6af" class="graf graf--h3 graf-after--p">Analytical Writing Assessment</h3><p name="8434" id="8434" class="graf graf--p graf-after--h3">The AWA, as mentioned before consists of two tasks. One is the Issue essay and the other one is the Argument essay.</p><h4 name="992d" id="992d" class="graf graf--h4 graf-after--p">Issue Essay</h4><p name="4985" id="4985" class="graf graf--p graf-after--h4">The issue essay consists of various topics that fall into various buckets like art, culture, education, government etc. There is a certain topic and mostly you have to analyse the issue at hand and pick a side i.e. for or against and then write the essay. This is a list of steps generally followed for writing the issue essay.</p><ol class="postList"><li name="eabc" id="eabc" class="graf graf--li graf-after--p">Brainstorm.</li><li name="4bec" id="4bec" class="graf graf--li graf-after--li">Pick a side by writing down points (bullet shorthand points on rough sheet) for each side.</li><li name="1557" id="1557" class="graf graf--li graf-after--li">You need 3 body paragraphs, 1 introduction and 1 conclusion. 2 paragraphs are usually for addressing the side you choose and 1 is for addressing the opposite side. So choose your sides accordingly.</li><li name="2630" id="2630" class="graf graf--li graf-after--li">Start with the introduction (if you can come up with one without waisting much time.)</li><li name="7289" id="7289" class="graf graf--li graf-after--li">Write the 3 body paragraphs.</li><li name="3b04" id="3b04" class="graf graf--li graf-after--li">Finally, the conclusion.</li><li name="72d2" id="72d2" class="graf graf--li graf-after--li">Proofread the essay because there are no spellcheckers in the software to rectify spelling mistakes.</li></ol><p name="3b33" id="3b33" class="graf graf--p graf-after--li">It is also best to follow some sort of a template for both the essays. <a href="https://crunchprep.com/gre-analytical-writing-guide" data-href="https://crunchprep.com/gre-analytical-writing-guide" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Crunchprep</a> provides an amazing blog covering each and every aspect of the AWA and they also provide templates for both the essays. Use the template and modify according to the topic at hand. Do not cram the template up and write it word for word. That will count as plagiarism as a lot of other students might also be doing the same.</p><h4 name="237e" id="237e" class="graf graf--h4 graf-after--p">Argument Essay</h4><p name="8fe0" id="8fe0" class="graf graf--p graf-after--h4">The argument essay is comparatively easier than the issue essay. Here, a certain argument paragraph is provided and the reader needs to find out the assumptions in the argument and write up an essay pointing out these assumptions that the author makes. There are many different types of assumptions usually encountered in an argument essay paragraph and the crunchprep blog covers everything up very well.</p><ol class="postList"><li name="50ec" id="50ec" class="graf graf--li graf-after--p">Brainstorm to find out the assumptions. Write down mini points on the rough sheet.</li><li name="8cbd" id="8cbd" class="graf graf--li graf-after--li">Begin with the introduction. Mention that the argument is flawed and thus the conclusion doesn’t hold true.</li><li name="ae35" id="ae35" class="graf graf--li graf-after--li">Write up 2–3 body paragraphs providing the various assumptions that weaken the argument.</li><li name="ab4f" id="ab4f" class="graf graf--li graf-after--li">Remember to provide rectification for these missing pieces at the end of every body paragraph. Something like <em class="markup--em markup--li-em">“If additional survey had been done with a large sample of people, the argument would have been much more convincing”</em></li><li name="fd24" id="fd24" class="graf graf--li graf-after--li">Write up the conclusion and do not introduce any new point here. Just summarise what all you have written in the previous paragraphs.</li></ol><h3 name="23dd" id="23dd" class="graf graf--h3 graf-after--li">Gmat AWA</h3><p name="4409" id="4409" class="graf graf--p graf-after--h3">There is no free service out there that matches the level of <a href="http://gmatawa.com" data-href="http://gmatawa.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">GMAT AWA</a> for scoring your essays. You get 10 free essay evaluations on an email address and these evaluations are pretty accurate. So do remember to check out the scoring from this website for every essay you practice. You must practice 10 essays each for Issue and Argument before the actual exam.</p><p name="66d8" id="66d8" class="graf graf--p graf-after--p graf--trailing">I guess the list of resources provided here is more than enough to get you a great score. In case you have any other query regarding the exam or any other content, feel free to reach out to me :). Would love to help you get through.</p></div></div></section>
</section>
</article></body></html>-->
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/10/25/How-my-mentor-saved-me-from-breaking-50-production-servers-6ed0d99df92d/">
        How my mentor saved me from breaking 50 production servers
      </a>
    </h1>

    <span class="post-date">25 Oct 2016</span>
  
    
    <!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How my mentor saved me from breaking 50 production servers</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How my mentor saved me from breaking 50 production servers</h1>
</header>
<section data-field="subtitle" class="p-summary">
Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a…
</section>
<section data-field="body" class="e-content">
<section name="4907" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--fullWidth"><figure name="1a1f" id="1a1f" class="graf graf--figure graf--layoutFillWidth graf--leading"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 67.10000000000001%;"></div><img class="graf-image" data-image-id="1*WGDDXDYWMqgCYSoZorNmiA.jpeg" data-width="2235" data-height="1500" src="https://cdn-images-1.medium.com/max/2000/1*WGDDXDYWMqgCYSoZorNmiA.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="b1d6" id="b1d6" class="graf graf--h3 graf-after--figure graf--title"></h3><p name="ecd5" id="ecd5" class="graf graf--p graf-after--h3">Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a request may lead the customer to uninstall the application. A sluggish or an unresponsive service may cause things to go haywire. And you are responsible for making a small code change in such a system. What do you do ? How do you go about it ?
    <br>
    <a href="/2016/10/25/How-my-mentor-saved-me-from-breaking-50-production-servers-6ed0d99df92d/">
         Read More...
    </a>
    <hr>
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How my mentor saved me from breaking 50 production servers</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How my mentor saved me from breaking 50 production servers</h1>
</header>
<section data-field="subtitle" class="p-summary">
Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a…
</section>
<section data-field="body" class="e-content">
<section name="4907" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--fullWidth"><figure name="1a1f" id="1a1f" class="graf graf--figure graf--layoutFillWidth graf--leading"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 67.10000000000001%;"></div><img class="graf-image" data-image-id="1*WGDDXDYWMqgCYSoZorNmiA.jpeg" data-width="2235" data-height="1500" src="https://cdn-images-1.medium.com/max/2000/1*WGDDXDYWMqgCYSoZorNmiA.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="b1d6" id="b1d6" class="graf graf--h3 graf-after--figure graf--title"></h3><p name="ecd5" id="ecd5" class="graf graf--p graf-after--h3">Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a request may lead the customer to uninstall the application. A sluggish or an unresponsive service may cause things to go haywire. And you are responsible for making a small code change in such a system. What do you do ? How do you go about it ?  <p name="ffc2" id="ffc2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">TLDR; </strong>This article is my retrospective on a potential screw up on our production system due to a bad code I wrote.-->
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How my mentor saved me from breaking 50 production servers</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How my mentor saved me from breaking 50 production servers</h1>
</header>
<section data-field="subtitle" class="p-summary">
Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a…
</section>
<section data-field="body" class="e-content">
<section name="4907" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--fullWidth"><figure name="1a1f" id="1a1f" class="graf graf--figure graf--layoutFillWidth graf--leading"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 67.10000000000001%;"></div><img class="graf-image" data-image-id="1*WGDDXDYWMqgCYSoZorNmiA.jpeg" data-width="2235" data-height="1500" src="https://cdn-images-1.medium.com/max/2000/1*WGDDXDYWMqgCYSoZorNmiA.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 name="b1d6" id="b1d6" class="graf graf--h3 graf-after--figure graf--title"></h3><p name="ecd5" id="ecd5" class="graf graf--p graf-after--h3">Hundreds of production servers being blasted with requests from millions of users on a per second basis. A slight delay in serving a request may lead the customer to uninstall the application. A sluggish or an unresponsive service may cause things to go haywire. And you are responsible for making a small code change in such a system. What do you do ? How do you go about it ?</p><p name="ffc2" id="ffc2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">TLDR; </strong>This article is my retrospective on a potential screw up on our production system due to a bad code I wrote.</p><p name="c0b2" id="c0b2" class="graf graf--p graf-after--p">I work as a Backend Developer at a startup where we deal with features and bug fixes affecting millions of people on a daily basis. A small fracture in the code and it doesn’t take time before shit hits the fan.</p><p name="2b85" id="2b85" class="graf graf--p graf-after--p">We are a messaging based platform and large part of the messaging volume are Stickers. Something like this —</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="529e" id="529e" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1000px; max-height: 413px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.3%;"></div><img class="graf-image" data-image-id="1*Z1VabAJZ9dguiXQjXyIiPQ.png" data-width="1600" data-height="661" src="https://cdn-images-1.medium.com/max/1000/1*Z1VabAJZ9dguiXQjXyIiPQ.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c240" id="c240" class="graf graf--p graf-after--figure">We have a dedicated team for curating content for stickers and they recently came up with the idea of animated stickers. Customers got bored of the static stickers and putting some animation in them could prove useful for us.</p><p name="2aee" id="2aee" class="graf graf--p graf-after--p">From a technical standpoint on the server end, a small requirement came up. We needed to put in some hacks in place to maintain backward compatibility with older clients.</p><blockquote name="4f88" id="4f88" class="graf graf--pullquote graf-after--p">Whenever a new client i.e. a supported build for the animated stickers sends a packet to an older client i.e. the unsupported build, we should send a customised message to the older client telling them to upgrade to the newer build. We cannot directly send an animated sticker as the older client won’t understand it and the application might crash.</blockquote><p name="4fdf" id="4fdf" class="graf graf--p graf-after--pullquote">Well this looks pretty simple right ? Just a couple of version checks on the server side and you’re good to go. However, the client one upped this by adding that the intercept message should be customised and should be different for every animated sticker<strong class="markup--strong markup--p-strong">. </strong>This was also not much of an effort. We just had to save the intercept messages in our existing sticker database (which is Mongo right now) and put a cache on top of it to prevent redundant calls to Mongo and we were good to go.</p><p name="6e7c" id="6e7c" class="graf graf--p graf-after--p">The problem was with identification of an animated sticker whenever one came in our server flow. The simplest way would have been where the client tells us if it’s a static sticker or an animated sticker. But this was not always possible — we were told — because of some bug on an older version of the application.</p><p name="d465" id="d465" class="graf graf--p graf-after--p">Every sticker packet has a stickerId associated with it. It is a unique Id generated by the sticker team while storing sticker content in the database. An animated sticker packet (JSON packet) would look something like this</p><pre name="b6f1" id="b6f1" class="graf graf--pre graf-after--p">{<br>     &quot;t&quot;: &quot;st&quot;,</pre><pre name="981a" id="981a" class="graf graf--pre graf-after--pre">     &quot;md&quot;: <br>         {</pre><pre name="e59a" id="e59a" class="graf graf--pre graf-after--pre">              &quot;is_anim&quot;: 1</pre><pre name="90d2" id="90d2" class="graf graf--pre graf-after--pre">         },</pre><pre name="6e41" id="6e41" class="graf graf--pre graf-after--pre">     &quot;stkId&quot;: &quot;loveydovey123&quot;<br>}</pre><p name="fccf" id="fccf" class="graf graf--p graf-after--pre">The <strong class="markup--strong markup--p-strong">is_anim<em class="markup--em markup--p-em"> </em></strong>field may or may not be present always. So we needed another way of differentiating animated from a static sticker.</p><p name="6b49" id="6b49" class="graf graf--p graf-after--p">Without much deliberation I came up with a solution. We store the sticker data in MongoDb and we also keep a field in the document for each sticker indicating if it is an enhanced sticker.</p><p name="8169" id="8169" class="graf graf--p graf-after--p">I wrote the code in such a way that for every given sticker (for which <strong class="markup--strong markup--p-strong">is_anim<em class="markup--em markup--p-em"> </em></strong>is missing), the code would hit an in memory cache — which would keep the intercept message (if any) as described before and would also tell us if the given sticker packet is an animated one for a period of 2 hours. In case of a cache miss the code will hit the persistent storage i.e. Mongo in this case and populate the in memory cache as well. Lets look at the pseudo code</p><pre name="8105" id="8105" class="graf graf--pre graf-after--p">public boolean isAnimatedSticker(String stickerId)<br>{     <br>     boolean isAnimated = CacheManager.get(stickerId);</pre><pre name="dcc7" id="dcc7" class="graf graf--pre graf-after--pre">     if(isAnimated != null &amp;&amp; isAnimated == true) <br>        return true;<br> <br>     if(isAnimated == null)<br>        return populateCacheFromDbAndReturnData(stickerId);</pre><pre name="c214" id="c214" class="graf graf--pre graf-after--pre">     return false;</pre><pre name="0b67" id="0b67" class="graf graf--pre graf-after--pre">}</pre><p name="0836" id="0836" class="graf graf--p graf-after--pre">Simple piece of code right ? Checks the cache to see if the sticker is enhanced, if nothing is found in the cache it hits the database and populates the cache and also returns the desired result. All this worked right off the bat and was tested thoroughly on our staging and dev environments.</p><p name="7cd9" id="7cd9" class="graf graf--p graf-after--p">There was a lot of pressure from the product manager for animated stickers as their release was due in a couple of days (release of a new build in the market). So we were in a hurry to get the change set deployed on production.</p><p name="9253" id="9253" class="graf graf--p graf-after--p">My mentor and some other seniors in the team were vey careful in taking any changes to production at that time owing to a major service outage already affecting us.</p><p name="4cf2" id="4cf2" class="graf graf--p graf-after--p">While reviewing the code, my mentor raised a crucial question I had failed to address. He asked me why, I was querying Mongo and how many times will I do it. I told him when and why I would be doing it. Then he asked me</p><blockquote name="8fc1" id="8fc1" class="graf graf--pullquote graf--startsWithDoubleQuote graf-after--p"><strong class="markup--strong markup--pullquote-strong">“Will I hit Mongo for every unique sticker packet once on every production machine to check if it is animated ?”</strong></blockquote><p name="3ddc" id="3ddc" class="graf graf--p graf-after--pullquote">I said “<em class="markup--em markup--p-em">Only for the ones for which is_anim field is missing. Basically for every static sticker and some animated stickers</em>” ! He said this will <strong class="markup--strong markup--p-strong">definitely</strong> <strong class="markup--strong markup--p-strong">break production</strong>. I was like</p><figure name="2e44" id="2e44" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 512px; max-height: 351px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 68.60000000000001%;"></div><img class="graf-image" data-image-id="1*kyWSPddrwLomm1FmVDdoQg.jpeg" data-width="512" data-height="351" src="https://cdn-images-1.medium.com/max/800/1*kyWSPddrwLomm1FmVDdoQg.jpeg"></div></figure><p name="03c3" id="03c3" class="graf graf--p graf-after--figure">He didn’t say it that calmly though. He was pissed at me for coming up with a stupid design. We have about 50 production servers and every server will have its own in memory cache. Out of the 24,000 messages per second in peak time, we have about 8k messages for stickers. <strong class="markup--strong markup--p-strong">Out of these 8000 messages, 3000 are unique stickers</strong> — We have about 12,000 unique stickers on the app today and stickers is one of our most used and loved feature.</p><p name="a862" id="a862" class="graf graf--p graf-after--p">That means 3k Mongo calls per production server which when escalated to 5o servers would mean around 150k calls on Mongo in a very short span of time. This will definitely bring down the stickers Mongo server as it is not very well scaled right now. It is tuned to serve around 1–2k calls at max.</p><p name="b420" id="b420" class="graf graf--p graf-after--p">This scenario would have taken place at the time of deploying my code on production. Although we have a 4 minute gap between server restarts but the design still sucked and my manager wasn’t going to take any chances with it. This was alarming also because the change set was written in a manner where it would affect the main messaging flow.</p><p name="10ec" id="10ec" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">It should have been written in an asynchronous manner in the first place</strong> where any outage in the animated stickers code would not affect other services in the infrastructure.</p><p name="43ba" id="43ba" class="graf graf--p graf-after--p">This was supposed to be a simple change to be done under the radar but I ended up being ridiculed for doing such a poor effort. What I learnt from this small (major ?) incident is that before diving into the task assigned and becoming coding ninjas right away, you should adhere to certain guidelines.</p><h3 name="a7e7" id="a7e7" class="graf graf--h3 graf-after--p">Think before you Code</h3><p name="7610" id="7610" class="graf graf--p graf-after--h3">Never go off writing code based on the first solution that comes to your mind. Always write down a basic pseudo code first and then consider all possibilities where things could possibly go wrong and break the system. This should be done irrespective of how large or small the change set is. Even for a hot fix !</p><figure name="4ccd" id="4ccd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 550px; max-height: 832px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 151.29999999999998%;"></div><img class="graf-image" data-image-id="1*RNT-8qt-DXLJWDva8t7C3w.jpeg" data-width="550" data-height="832" src="https://cdn-images-1.medium.com/max/800/1*RNT-8qt-DXLJWDva8t7C3w.jpeg"></div></figure><h3 name="46f3" id="46f3" class="graf graf--h3 graf-after--figure">Some Key parameters to Ponder</h3><p name="e865" id="e865" class="graf graf--p graf-after--h3">Code is anything but a few lines of the language syntax. Before finalising any solution for the problem at hand, do consider the following parameters</p><ul class="postList"><li name="7a9e" id="7a9e" class="graf graf--li graf-after--p">Code should be clean and easy to understand.</li><li name="5d6f" id="5d6f" class="graf graf--li graf-after--li">Should be Unit Testable.</li><li name="1007" id="1007" class="graf graf--li graf-after--li">If your code is interacting with external services or databases, make sure to not overwhelm them. You should have some sort of caching or rate limiting in place.</li><li name="5836" id="5836" class="graf graf--li graf-after--li">Before writing any code from scratch, always try and find in the current system if something has already been implemented.</li></ul><h3 name="19a8" id="19a8" class="graf graf--h3 graf-after--li">Load Testing is a Must</h3><p name="3a7a" id="3a7a" class="graf graf--p graf-after--h3">Most of the times functional testing is not enough. Like in this case, if some sort of load testing had been done, this problem would not have surfaced right before deployment. So there should always be certain automated test cases — or as most people call it a <strong class="markup--strong markup--p-strong">Regression Suite — </strong>ready to run on your change set along with some sort of fabricated load to verify if nothing breaks.</p><h3 name="9ea7" id="9ea7" class="graf graf--h3 graf-after--p">Say NO to Hacks</h3><p name="8c6e" id="8c6e" class="graf graf--p graf-after--h3">The server guys get a lot of requests from the client to put in hacks just because of some buggy builds that went out. Sometimes it is easy to put in a hack but over a period of time things get messy. The code quickly changes from an elegantly structured piece of software to garbled shit no one can understand.</p><p name="4552" id="4552" class="graf graf--p graf-after--p">Start saying NO to the client guys. Only accommodate changes if they can be done in time, with proper functional and load testing and thorough code review.</p><h3 name="8a24" id="8a24" class="graf graf--h3 graf-after--p">Go the Async Way</h3><p name="9382" id="9382" class="graf graf--p graf-after--h3">I’m sure most of the audience here would be familiar with the concept of Micro services. A small component of code that can be built, tested and deployed independently of the main code. That is how stuff should be written in my opinion.</p><p name="ba3c" id="ba3c" class="graf graf--p graf-after--p">You can’t go on modifying the main code flow because a small mistake on your part could cause a major outage. So try and write code that is asynchronous and thus works independently off the main flow.</p><p name="bfbd" id="bfbd" class="graf graf--p graf-after--p">Ofcourse, don’t go on making every feature a microservice in itself.</p><h3 name="98e3" id="98e3" class="graf graf--h3 graf-after--p">UPDATE</h3><p name="6003" id="6003" class="graf graf--p graf-after--h3">I did not mention the final solution which we came at after discussions because that in itself was another hack. There is another component of every sticker called the<strong class="markup--strong markup--p-strong"> category Id</strong>.</p><p name="18cc" id="18cc" class="graf graf--p graf-after--p">We have different packs of stickers and each pack has a unique categoryId and in it every sticker in itself has a stickerId. We were told that only 3 packs of animated stickers will be released on production and so we decided on supporting just those three (in cases where client does not provide any info on sticker being animated in the JSON itself). So we hard coded those 3 category IDs , something like this</p><pre name="abe1" id="abe1" class="graf graf--pre graf-after--p">if(packet.getMetdata.contains(anim_field) || categoryId is one of list(a,b,c))<br>{ <br> <br>       isAnimated = True;</pre><pre name="263b" id="263b" class="graf graf--pre graf-after--pre">} </pre><p name="f101" id="f101" class="graf graf--p graf-after--pre graf--trailing">This again is not an elegant solution but there isn’t one for such problems I guess. There has to be some sort of a common ground between client and the server.</p></div></div></section>
</section>
</article></body></html>-->
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2016/03/05/Life-Lessons-e2d986747feb/">
        Life Lessons
      </a>
    </h1>

    <span class="post-date">05 Mar 2016</span>
  
    
    <!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Life Lessons !!</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Life Lessons !!</h1>
</header>
<section data-field="subtitle" class="p-summary">
Life is a Race! If you don’t run fast, someone will crush you and overtake you.
</section>
<section data-field="body" class="e-content">
<section name="99d6" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b4e7" id="b4e7" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="a1e1" id="a1e1" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*OGdRMytMAm-49cZ-YUlkOg.jpeg" data-width="1920" data-height="1080" src="https://cdn-images-1.medium.com/max/2000/1*OGdRMytMAm-49cZ-YUlkOg.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="c2b2" id="c2b2" class="graf graf--pullquote graf-after--figure">Life is a Race! If you don’t run fast, someone will crush you and overtake you.</blockquote><p name="3acf" id="3acf" class="graf graf--p graf-after--pullquote">A famous dialogue from one of my most beloved movies of all time, <strong class="markup--strong markup--p-strong">3 Idiots</strong>
    <br>
    <a href="/2016/03/05/Life-Lessons-e2d986747feb/">
         Read More...
    </a>
    <hr>
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Life Lessons !!</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Life Lessons !!</h1>
</header>
<section data-field="subtitle" class="p-summary">
Life is a Race! If you don’t run fast, someone will crush you and overtake you.
</section>
<section data-field="body" class="e-content">
<section name="99d6" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b4e7" id="b4e7" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="a1e1" id="a1e1" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*OGdRMytMAm-49cZ-YUlkOg.jpeg" data-width="1920" data-height="1080" src="https://cdn-images-1.medium.com/max/2000/1*OGdRMytMAm-49cZ-YUlkOg.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="c2b2" id="c2b2" class="graf graf--pullquote graf-after--figure">Life is a Race! If you don’t run fast, someone will crush you and overtake you.</blockquote><p name="3acf" id="3acf" class="graf graf--p graf-after--pullquote">A famous dialogue from one of my most beloved movies of all time, <strong class="markup--strong markup--p-strong">3 Idiots</strong>  <div name="bbbf" id="bbbf" class="graf graf--mixtapeEmbed graf-after--p"><a href="http://www.imdb.com/title/tt1187043/" data-href="http://www.imdb.com/title/tt1187043/" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://www.imdb.com/title/tt1187043/"><strong class="markup--strong markup--mixtapeEmbed-strong">3 Idiots (2009)</strong><br><em class="markup--em markup--mixtapeEmbed-em">Directed by Rajkumar Hirani. With Aamir Khan, Madhavan, Mona Singh, Sharman Joshi. Two friends are searching for their…</em>www.imdb.com</a><a href="http://www.imdb.com/title/tt1187043/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5330f8d0bf3d926aebfebcfda90ff1b9" data-thumbnail-img-id="0*rBywo5OkZZw10dhC." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*rBywo5OkZZw10dhC.);"></a></div><p name="e2f3" id="e2f3" class="graf graf--p graf-after--mixtapeEmbed">It’s a really long article. I invested a lot of time coming up with these points and putting my thoughts to words. Hope you are able to take away some good stuff from this and hope this helps you out !!-->
    <!--<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Life Lessons !!</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 100%;
        margin: auto;
      }
      section {
        width: 100%;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 100%;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Life Lessons !!</h1>
</header>
<section data-field="subtitle" class="p-summary">
Life is a Race! If you don’t run fast, someone will crush you and overtake you.
</section>
<section data-field="body" class="e-content">
<section name="99d6" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="b4e7" id="b4e7" class="graf graf--h3 graf--leading graf--title"></h3></div><div class="section-inner sectionLayout--fullWidth"><figure name="a1e1" id="a1e1" class="graf graf--figure graf--layoutFillWidth graf-after--h3"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*OGdRMytMAm-49cZ-YUlkOg.jpeg" data-width="1920" data-height="1080" src="https://cdn-images-1.medium.com/max/2000/1*OGdRMytMAm-49cZ-YUlkOg.jpeg"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><blockquote name="c2b2" id="c2b2" class="graf graf--pullquote graf-after--figure">Life is a Race! If you don’t run fast, someone will crush you and overtake you.</blockquote><p name="3acf" id="3acf" class="graf graf--p graf-after--pullquote">A famous dialogue from one of my most beloved movies of all time, <strong class="markup--strong markup--p-strong">3 Idiots</strong></p><div name="bbbf" id="bbbf" class="graf graf--mixtapeEmbed graf-after--p"><a href="http://www.imdb.com/title/tt1187043/" data-href="http://www.imdb.com/title/tt1187043/" class="markup--anchor markup--mixtapeEmbed-anchor" title="http://www.imdb.com/title/tt1187043/"><strong class="markup--strong markup--mixtapeEmbed-strong">3 Idiots (2009)</strong><br><em class="markup--em markup--mixtapeEmbed-em">Directed by Rajkumar Hirani. With Aamir Khan, Madhavan, Mona Singh, Sharman Joshi. Two friends are searching for their…</em>www.imdb.com</a><a href="http://www.imdb.com/title/tt1187043/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="5330f8d0bf3d926aebfebcfda90ff1b9" data-thumbnail-img-id="0*rBywo5OkZZw10dhC." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*rBywo5OkZZw10dhC.);"></a></div><p name="e2f3" id="e2f3" class="graf graf--p graf-after--mixtapeEmbed">It’s a really long article. I invested a lot of time coming up with these points and putting my thoughts to words. Hope you are able to take away some good stuff from this and hope this helps you out !!</p><h3 name="fbb0" id="fbb0" class="graf graf--h3 graf-after--p">Life is NOT a Race</h3><p name="140c" id="140c" class="graf graf--p graf-after--h3">The most important point that we don’t realize is that <strong class="markup--strong markup--p-strong">life in fact is not inherently a race. It is we who make it a race and bring about this feeling of competition. </strong>Right from the time we were born, we were taught that we need to come first. First in class, first in sports, first in extra curricular activities etc. We are in a constant state of <strong class="markup--strong markup--p-strong">comparison with our peers.</strong> In this process we actually limit our potential.</p><p name="1bbc" id="1bbc" class="graf graf--p graf-after--p">Let me cite a simple example. Suppose the highest percentage in a class is 85 % and a kid gets say 87 %, his parents will be elated with his performance for the sole reason that came <strong class="markup--strong markup--p-strong">first.</strong> What we don’t realise is that he probably had the capability to score 90+. And in case the maximum potential for our kid is say 75 % and despite that he gets a 77 %, we tend to scold him. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Why ? </em></strong>because there is a student who performed better than him. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">FREAKING COMPETITION !!</em></strong></p><p name="a087" id="a087" class="graf graf--p graf-after--p">We take this sense of competition everywhere we go. People can compete on just about anything. Consider this. There are two families A and B. when family A visits B, B makes about say <strong class="markup--strong markup--p-strong">5 dishes for lunch. </strong>(And yes, this is in fact counted !!). Now family B happens to visit A in the future and in case A makes lesser number of dishes than what B made, then it is considered to be a sign of disrespect. Trust me, this happens. <strong class="markup--strong markup--p-strong">Shit like this does happen. :(</strong></p><blockquote name="9cc4" id="9cc4" class="graf graf--blockquote graf-after--p">Life is like a car ride from a source to a destination. No matter how fast you go and who accompanies you, you will reach your destination. People will keep getting in and getting off of your car as you continue down your lane. Some people will be driving their cars at a higher speed than you. Do not pay any heed to them because if you happen to beat one person, there will always be another one to beat and in case you become the best (i.e. the fastest in this case), you will always have the insecurity of maintaining your position at the top.</blockquote><p name="3f79" id="3f79" class="graf graf--p graf-after--blockquote">So stop competing with others and instead focus on building your abilities. Focus on building stronger relationships and living life to the fullest because Hey, YOLO !</p><h3 name="9611" id="9611" class="graf graf--h3 graf-after--p">Relationship or Business ?</h3><p name="692e" id="692e" class="graf graf--p graf-after--h3">A lot of problems in our lives are there because of a lot of expectations we have from our friends and family members etc. Let me give you a very simple example of how <strong class="markup--strong markup--p-strong">expectations ruin relationships.</strong></p><p name="ddcf" id="ddcf" class="graf graf--p graf-after--p">A very naive example where expectations destroy relationships is a common neighbourhood scenario. We decided to help our neighbours by helping them organising an important family function. Helped them with preparation, invitations and stuff. Roles reversed, the same did not happen. The neighbours were disinterested in helping us out and we develop a grudge against them as we <strong class="markup--strong markup--p-strong">expected them to pay back. Sad but true !</strong></p><p name="0a69" id="0a69" class="graf graf--p graf-after--p">That’s a very big problem in relationships. We give loads of love, but we also expect a lot of that coming back. We expect a lot of stuff from a lot of people and that is where it all goes wrong. <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Relationships simply mean give, give and only give. Business means give and take. Its upto you to decide what you consider it to be.</em></strong></p><h3 name="225e" id="225e" class="graf graf--h3 graf-after--p">Who is the real us ?</h3><p name="b2c3" id="b2c3" class="graf graf--p graf-after--h3">A typical professional’s day appears to be one that has literally been programmed into their memory. He does the same things over and over again, in the same manner, in the same sequence and still knows that what he is doing is probably <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">shitty and is still willing to do that for years at a stretch.</em></strong> The life of a typical IT guy is somewhere on these lines :-</p><ol class="postList"><li name="6682" id="6682" class="graf graf--li graf-after--p">Get up (Same time everyday).</li><li name="59fa" id="59fa" class="graf graf--li graf-after--li">Prepare breakfast (Same old same old. No surprises here :p)</li><li name="7dea" id="7dea" class="graf graf--li graf-after--li">Reach office round about 9 a.m. Every single day without a leave.</li><li name="98e3" id="98e3" class="graf graf--li graf-after--li">Work your ass off the entire day for 12–13 hours at a stretch. He probably doesn’t even love the work he is doing, but still does it.</li><li name="ad8b" id="ad8b" class="graf graf--li graf-after--li">Toady to your manager.</li><li name="e124" id="e124" class="graf graf--li graf-after--li">Come home late night exhausted from work.</li><li name="b30d" id="b30d" class="graf graf--li graf-after--li">Sleep. Well this was a no brainer !!</li></ol><blockquote name="7a63" id="7a63" class="graf graf--blockquote graf-after--li">This seems to be a script fed to a <strong class="markup--strong markup--blockquote-strong">ROBOT and he executes it every day without any exceptions.</strong> But who is the real us? The one that we put on when we go to work everyday amidst the pressures of our everyday life, or the one we display when we are jumping around in the rain with our friends?</blockquote><p name="3826" id="3826" class="graf graf--p graf-after--blockquote">Pay a small attention to this.Take a break from this monotonous routine and you might be surprised with what you find. You will realize that you have been a part of the wrong race this whole time and that you need to participate in a different race moving forward and in that race you won’t be mediocre any more.</p><h3 name="88b5" id="88b5" class="graf graf--h3 graf-after--p">Empathy</h3><p name="a3fb" id="a3fb" class="graf graf--p graf-after--h3">In our day to day lives performing the same laborious mundane tasks over and over again can be extremely overwhelming. So much so that we always try to find an answer to the question</p><p name="2eba" id="2eba" class="graf graf--p graf--startsWithDoubleQuote graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">“What’s in it for me ?”</em></strong></p><p name="736c" id="736c" class="graf graf--p graf-after--p">We always look for opportunities that would benefit us. In the process we even tend to hurt others and if someone is facing a problem or has a contrasting viewpoint, we tend to go all out against them and criticise them for being different. My suggestion ?</p><blockquote name="7684" id="7684" class="graf graf--blockquote graf-after--p">Step in the shoes of the other person and try walking a mile. Be empathetic to them. Try being an altruist. Prove the cynical ideology of people wrong by understanding other’s viewpoints as well and understanding them and at times even accepting them without letting your ego get in the way.</blockquote><h3 name="8707" id="8707" class="graf graf--h3 graf-after--blockquote">Crave for Knowledge and not Money</h3><p name="4fb6" id="4fb6" class="graf graf--p graf-after--h3">From what I have seen and form my interactions with my peers, I have found out that 90% of times the reason for happiness or the <em class="markup--em markup--p-em">pain in the arse </em>behaviour or switching a company is <strong class="markup--strong markup--p-strong">MONEY.</strong></p><blockquote name="8959" id="8959" class="graf graf--blockquote graf-after--p">I’m not being paid enough. I have had a lot of impact.</blockquote><blockquote name="df05" id="df05" class="graf graf--blockquote graf-after--blockquote">Had I a strong family business, I would never be a part of this industry.</blockquote><blockquote name="1119" id="1119" class="graf graf--blockquote graf--hasDropCapModel graf-after--blockquote">The only reason I’m into this field is because it pays off.</blockquote><p name="f15d" id="f15d" class="graf graf--p graf-after--blockquote">I’m surprised that no one ever mentions their passion for what they are doing. Never heard someone tell me that money is second nature for them, what’s more important is the quality of work they get. The sought of stuff they work upon day in and day out. Why does it always have to be about money ? Why can’t we instead invest in our skills and crave for knowledge as much as we crave for money and fame ?</p><h3 name="82b5" id="82b5" class="graf graf--h3 graf-after--p">Health is …..</h3><p name="8895" id="8895" class="graf graf--p graf-after--h3">For us Software Developers, spending hours at a stretch in front of a computer screen is completely normal. If you work at a startup, the stress levels and the time you spend in front of a screen is even more. Because of this, a lot of us suffer from back pains and stiffness and various other types of maladies.</p><p name="6efa" id="6efa" class="graf graf--p graf-after--p">Still, we don’t pay much heed to our health. Health somehow does not become a priority for us. There is always something better to do than exercising or shaping up our body.</p><p name="2ce4" id="2ce4" class="graf graf--p graf-after--p">It is only when the Doc tells us <strong class="markup--strong markup--p-strong">“Enough. If you don’t exercise now, you might be bedridden for life !! “ </strong>do we start to consider this thing called health seriously. I mean if you can’t get off the bed in the morning yourself, how will you work all day long ? Who will take care of you in your old age when things will get even worse ? You will end up spoiling your job, relationships and everything you once loved will flush down the toilet because ? (No points for guessing !!).</p><p name="cff6" id="cff6" class="graf graf--p graf-after--p">Health is <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Wealth</em></strong>. Period !!</p><h3 name="da7b" id="da7b" class="graf graf--h3 graf-after--p">Travel</h3><p name="f4e8" id="f4e8" class="graf graf--p graf-after--h3">One of my favourite topics. Could write about this for hours and still not get bored. The phrase <strong class="markup--strong markup--p-strong">You only live once. Live life king size </strong>and the stuff, are boring clichés in today’s time. We have heard this about a thousand times or more in our lives but still we keep living the same monotonous lives. We always think about vacations but somehow this is something that keeps getting postponed.</p><p name="6c57" id="6c57" class="graf graf--p graf-after--p">We are never able to gather enough funds and find out a suitable time to escape into paradise (Well that’s really what travel is). I’ve stumbled upon so many blogs and articles here on Medium itself and I can’t emphasise enough the fact that travelling is something that <strong class="markup--strong markup--p-strong">rejuvenates us, rekindles us from the ground up, gives us a new perspective on life, reenergises us, helps you shun off the diffident you and add life to your lifeless life !!</strong></p><p name="f229" id="f229" class="graf graf--p graf-after--p">Recently I have been reading about this new kind of job profile for us Software Devs and its known as a <strong class="markup--strong markup--p-strong">Digital</strong> <strong class="markup--strong markup--p-strong">Nomad. </strong>A digital nomad is like a normal developer except he does not stay at one place for a long time. Instead, he keeps moving from one place to other like a <strong class="markup--strong markup--p-strong">nomad. </strong>Learning about problems people face, building solutions for them and most of all, travelling a lot.</p><p name="f796" id="f796" class="graf graf--p graf-after--p">Sounds fun right ? Do you have what it takes to quit your day job and become a Digital Nomad ?</p><h3 name="b972" id="b972" class="graf graf--h3 graf-after--p">Stop asking “Why me ?”</h3><p name="b123" id="b123" class="graf graf--p graf-after--h3">Life is a complete roller coaster ride. It almost never proceeds according to our expectations. Life is never what we want it to be. Someday we are elated and on cloud 9 as something happened unexpectedly and someday we are down and feeling as if it is the end of life for us.</p><p name="1dd7" id="1dd7" class="graf graf--p graf-after--p">When we are down, and I mean utterly depressed or something, we do tend to ask this one question from God and that is <strong class="markup--strong markup--p-strong">“Why me God ? Why ? What have I done to deserve this ?” </strong>We almost never get an answer to this question and with time our wounds heal (or at least we forget about them). I would urge you to stop obsessing morbidly over this. Let me quote a small excerpt I found on some blog :-</p><blockquote name="6a18" id="6a18" class="graf graf--blockquote graf-after--p">Arthur Ashe, the legendary Wimbledon player was dying of AIDS which he got due to infected blood he received during a heart surgery in 1983.</blockquote><blockquote name="901b" id="901b" class="graf graf--blockquote graf-after--blockquote">From the world over, he recieved letters from his fan, one of them conveyed: “Why does God have to select you for such a bad disease?”.</blockquote><blockquote name="0572" id="0572" class="graf graf--blockquote graf-after--blockquote">To this Arthur Ashe replied: The world over — 50,000,000 children start playing tennis, 5,000,000 learn to play tennis, 500,000 learn professional tennis, 50,000 come to the circuit, 5000 reach the grand slam, 50 reach the Wimbledon, 4 to semi finals, 2 to finals. When I was the one holding the cup, I never asked god “Why me?”.</blockquote><blockquote name="8fb4" id="8fb4" class="graf graf--blockquote graf-after--blockquote">And today in pain, I should not be asking GOD “why me?”.</blockquote><p name="1fa7" id="1fa7" class="graf graf--p graf-after--blockquote">In case you need motivation to pick yourself up and come out of such situations, read about <strong class="markup--strong markup--p-strong">Nick Vujicic, the man without arms and legs.</strong></p><figure name="5fa4" id="5fa4" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 395px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.39999999999999%;"></div><img class="graf-image" data-image-id="1*LCC2zPeUJJqXcpSWEykmkQ.jpeg" data-width="784" data-height="442" src="https://cdn-images-1.medium.com/max/800/1*LCC2zPeUJJqXcpSWEykmkQ.jpeg"></div><figcaption class="imageCaption">The man without limbs !!</figcaption></figure><h3 name="1741" id="1741" class="graf graf--h3 graf-after--figure">Focusing on what you have</h3><p name="ed15" id="ed15" class="graf graf--p graf-after--h3">Let me tell you a story to put across my point. There are two men. Let’s call them A and B. They meet over coffee one day and apparently, A is upset ovr something. He is really sad. Now B starts to interrogate straight away and asks</p><blockquote name="9bc9" id="9bc9" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“Hey man, Why do you look so upset ? What happened ? Everything okay ?”</blockquote><p name="7490" id="7490" class="graf graf--p graf-after--blockquote">A says that he had an uncle who just passed away. He left him a fortune of Rs 50,000. B is confused. He says</p><blockquote name="e09c" id="e09c" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“I don’t understand. You should be happy mate. 50,000 is a huge amount.”</blockquote><p name="955e" id="955e" class="graf graf--p graf-after--blockquote">To this A replies</p><blockquote name="16cc" id="16cc" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“No, you don’t understand. I have another uncle who just passed away leaving behind a fortune of Rs 10,00,000”</blockquote><p name="3d67" id="3d67" class="graf graf--p graf-after--blockquote">On being further confused by what is going on, B asks</p><blockquote name="11f5" id="11f5" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“Dude, shouldn’t you be celebrating. Rs 10,00,000 is a huge fortune. You couldn’t earn that kind of money in a lifetime !!”</blockquote><p name="c094" id="c094" class="graf graf--p graf-after--blockquote">A continues further by saying</p><blockquote name="122a" id="122a" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“No man. I have yet another uncle who passed away yesterday. :( And he left behind a fortune of Rs 50,00,000”</blockquote><p name="b0f8" id="b0f8" class="graf graf--p graf-after--blockquote">Now B is loosing his mind and being completely baffled by what is going on, he bursts out saying</p><blockquote name="ea1f" id="ea1f" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“Are you out of your freaking mind ? Why so sad when you have so much of inherited money ? Why dude ?”</blockquote><p name="8a89" id="8a89" class="graf graf--p graf-after--blockquote">To this A says</p><blockquote name="d714" id="d714" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“<strong class="markup--strong markup--blockquote-strong">Because I have no more uncles left to die !!</strong>”</blockquote><p name="1e7e" id="1e7e" class="graf graf--p graf-after--blockquote graf--trailing"><strong class="markup--strong markup--p-strong">The moral here being that if you always focus on what is missing in life, you are bound to be miserable</strong></p></div></div></section><section name="c190" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="56c5" id="56c5" class="graf graf--p graf--leading graf--trailing">If you are patient enough to read upto this point, do show some love by liking and recommending this article !! Cheers :)</p></div></div></section>
</section>
</article></body></html>-->
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page4">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page2">Newer</a>
    
  
</div>

    </div>

  </body>
</html>
